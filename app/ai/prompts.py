import json

MUSCLE_GROUPS_COMBINED = [
    "–≥—Ä—É–¥—å –∏ —Ä—É–∫–∏",
    "—Å–ø–∏–Ω–∞ –∏ –ø–ª–µ—á–∏",
    "–ø—Ä–µ—Å—Å –∏ –∫–æ—Ä–ø—É—Å",
    "–Ω–æ–≥–∏ –∏ –∏–∫—Ä—ã",
]

MUSCLE_GROUPS_SINGLE = [
    "–≥—Ä—É–¥—å",
    "—Å–ø–∏–Ω–∞",
    "–Ω–æ–≥–∏",
    "–ø–ª–µ—á–∏",
    "—Ä—É–∫–∏",
    "–ø—Ä–µ—Å—Å",
    "–∏–∫—Ä—ã",
    "–ø—Ä–µ–¥–ø–ª–µ—á—å—è",
]

PRO_MUSCLE_GROUPS_MEN = [
    "–ü–ª–µ—á–∏",
    "–°–ø–∏–Ω–∞",
    "–®–∏—Ä–æ—á–∞–π—à–∏–µ",
    "–¢—Ä–∞–ø–µ—Ü–∏–∏",
    "–ì—Ä—É–¥–Ω—ã–µ ‚Äî –≤–µ—Ä—Ö",
    "–ì—Ä—É–¥–Ω—ã–µ ‚Äî —Å–µ—Ä–µ–¥–∏–Ω–∞",
    "–ì—Ä—É–¥–Ω—ã–µ ‚Äî –Ω–∏–∑",
    "–ü—Ä–µ—Å—Å",
    "–†—É–∫–∏ ‚Äî –±–∏—Ü–µ–ø—Å",
    "–†—É–∫–∏ ‚Äî —Ç—Ä–∏—Ü–µ–ø—Å",
    "–ü—Ä–µ–¥–ø–ª–µ—á—å—è",
    "–ö–≤–∞–¥—Ä–∏—Ü–µ–ø—Å—ã",
    "–ë–∏—Ü–µ–ø—Å –±–µ–¥—Ä–∞",
    "–ò–∫—Ä—ã",
    "–Ø–≥–æ–¥–∏—Ü—ã –∏ –ø–æ—è—Å–Ω–∏—Ü–∞",
    "–ö–∞—Ä–¥–∏–æ",
    "–û–±—â–∏–π –∫–æ–º–ø–ª–µ–∫—Å",
]

PRO_MUSCLE_GROUPS_WOMEN = [
    "–Ø–≥–æ–¥–∏—Ü—ã",
    "–ë—ë–¥—Ä–∞",
    "–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å –±–µ–¥—Ä–∞",
    "–ò–∫—Ä—ã",
    "–ü—Ä–µ—Å—Å –∏ –∫–æ—Å—ã–µ –º—ã—à—Ü—ã –∂–∏–≤–æ—Ç–∞",
    "–ü–ª–µ—á–∏",
    "–°–ø–∏–Ω–∞ (–≤–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å)",
    "–†—É–∫–∏ ‚Äî –±–∏—Ü–µ–ø—Å",
    "–†—É–∫–∏ ‚Äî —Ç—Ä–∏—Ü–µ–ø—Å",
    "–ö–∞—Ä–¥–∏–æ",
    "–û–±—â–∏–π –∫–æ–º–ø–ª–µ–∫—Å",
]

PRO_MUSCLE_SETS_MEN = [
    ["–ì—Ä—É–¥–Ω—ã–µ ‚Äî –≤–µ—Ä—Ö", "–†—É–∫–∏ ‚Äî –±–∏—Ü–µ–ø—Å"],
    ["–°–ø–∏–Ω–∞", "–®–∏—Ä–æ—á–∞–π—à–∏–µ"],
    ["–ì—Ä—É–¥–Ω—ã–µ ‚Äî –Ω–∏–∑", "–†—É–∫–∏ ‚Äî —Ç—Ä–∏—Ü–µ–ø—Å"],
    ["–ö–≤–∞–¥—Ä–∏—Ü–µ–ø—Å—ã", "–ë–∏—Ü–µ–ø—Å –±–µ–¥—Ä–∞"],
    ["–ü–ª–µ—á–∏", "–¢—Ä–∞–ø–µ—Ü–∏–∏"],
    ["–ü—Ä–µ—Å—Å", "–ö–∞—Ä–¥–∏–æ"],
    ["–ò–∫—Ä—ã", "–ü—Ä–µ–¥–ø–ª–µ—á—å—è"],
    ["–Ø–≥–æ–¥–∏—Ü—ã –∏ –ø–æ—è—Å–Ω–∏—Ü–∞", "–ò–∫—Ä—ã"],
    ["–û–±—â–∏–π –∫–æ–º–ø–ª–µ–∫—Å"],
]

PRO_MUSCLE_SETS_WOMEN = [
    ["–Ø–≥–æ–¥–∏—Ü—ã", "–ë—ë–¥—Ä–∞"],
    ["–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å –±–µ–¥—Ä–∞", "–ò–∫—Ä—ã"],
    ["–ü—Ä–µ—Å—Å –∏ –∫–æ—Å—ã–µ –º—ã—à—Ü—ã –∂–∏–≤–æ—Ç–∞", "–ö–∞—Ä–¥–∏–æ"],
    ["–ü–ª–µ—á–∏", "–†—É–∫–∏ ‚Äî —Ç—Ä–∏—Ü–µ–ø—Å"],
    ["–°–ø–∏–Ω–∞ (–≤–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å)", "–†—É–∫–∏ ‚Äî –±–∏—Ü–µ–ø—Å"],
    ["–û–±—â–∏–π –∫–æ–º–ø–ª–µ–∫—Å"],
]

WORKOUT_SPLITS = {
    1: ["–æ–±—â–∏–π –∫–æ–º–ø–ª–µ–∫—Å"],
    2: ["–≤–µ—Ä—Ö", "–Ω–∏–∑"],
    3: ["–≥—Ä—É–¥—å", "—Å–ø–∏–Ω–∞", "–Ω–æ–≥–∏"],
    4: ["–≥—Ä—É–¥—å", "—Å–ø–∏–Ω–∞", "–Ω–æ–≥–∏", "–ø–ª–µ—á–∏"],
    5: ["–≥—Ä—É–¥—å", "—Å–ø–∏–Ω–∞", "–Ω–æ–≥–∏", "–ø–ª–µ—á–∏", "—Ä—É–∫–∏"],
}

SPLIT_DESCRIPTIONS = {
    1: "–û–±—â–∏–π –∫–æ–º–ø–ª–µ–∫—Å (1 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –≤ –Ω–µ–¥–µ–ª—é)",
    2: "–í–µ—Ä—Ö/–ù–∏–∑ (2 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –≤ –Ω–µ–¥–µ–ª—é)",
    3: "–ì—Ä—É–¥—å/–°–ø–∏–Ω–∞/–ù–æ–≥–∏ (3 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –≤ –Ω–µ–¥–µ–ª—é)",
    4: "–ì—Ä—É–¥—å/–°–ø–∏–Ω–∞/–ù–æ–≥–∏/–ü–ª–µ—á–∏ (4 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –≤ –Ω–µ–¥–µ–ª—é)",
    5: "–ì—Ä—É–¥—å/–°–ø–∏–Ω–∞/–ù–æ–≥–∏/–ü–ª–µ—á–∏/–†—É–∫–∏ (5+ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –≤ –Ω–µ–¥–µ–ª—é)",
}

TIP_TYPES = [
    "—Ñ–∏—Ç–Ω–µ—Å –∏ —Ç–µ—Ö–Ω–∏–∫–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π",
    "–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–∏—Ç–∞–Ω–∏–∏ –∏ –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏",
    "–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏ —Å–Ω–µ",
    "–º–æ—Ç–∏–≤–∞—Ü–∏–∏ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Ü–µ–ª–µ–π",
    "–ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–µ —Ç—Ä–∞–≤–º –∏ —Ä–∞–∑–º–∏–Ω–∫–µ",
]


# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# System prompts (static ‚Äî –∏–¥—É—Ç –ø–µ—Ä–≤—ã–º–∏ –¥–ª—è prompt caching)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

FOOD_ANALYSIS_SYSTEM = (
    "–¢—ã —ç–∫—Å–ø–µ—Ä—Ç-–Ω—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥. –û–ø—Ä–µ–¥–µ–ª–∏, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–æ –Ω–∞ —Ñ–æ—Ç–æ, –∏ –æ—Ü–µ–Ω–∏ –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç—å –±–ª—é–¥–∞. "
    "–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∂–∏ –ë–ñ–£ (–±–µ–ª–∫–∏, –∂–∏—Ä—ã, —É–≥–ª–µ–≤–æ–¥—ã) –≤ –≥—Ä–∞–º–º–∞—Ö. "
    "–ï—Å–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –æ–±—â–µ–µ, —Å–¥–µ–ª–∞–π —Ä–∞–∑—É–º–Ω—ã–µ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è –æ –ø–æ—Ä—Ü–∏–∏ (—Å—Ä–µ–¥–Ω—è—è –ø–æ—Ä—Ü–∏—è). "
    "–û—Ç–≤–µ—á–∞–π –≤—Å–µ–≥–¥–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ."
)

FOOD_ANALYSIS_USER = "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ñ–æ—Ç–æ –∏ –≤–µ—Ä–Ω–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç."

FOOD_CLARIFICATION_SYSTEM = (
    "–¢—ã —ç–∫—Å–ø–µ—Ä—Ç-–Ω—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏—Å–ª–∞–ª —Ñ–æ—Ç–æ –µ–¥—ã. –í–æ—Ç –µ–≥–æ —É—Ç–æ—á–Ω–µ–Ω–∏–µ: '{clarification}'. "
    "–û–ø—Ä–µ–¥–µ–ª–∏, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–æ –Ω–∞ —Ñ–æ—Ç–æ, –∏ –æ—Ü–µ–Ω–∏ –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç—å –±–ª—é–¥–∞ —Å —É—á—ë—Ç–æ–º —É—Ç–æ—á–Ω–µ–Ω–∏—è. "
    "–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∂–∏ –ë–ñ–£ (–±–µ–ª–∫–∏, –∂–∏—Ä—ã, —É–≥–ª–µ–≤–æ–¥—ã) –≤ –≥—Ä–∞–º–º–∞—Ö. "
    "–û—Ç–≤–µ—á–∞–π –≤—Å–µ–≥–¥–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ."
)

FOOD_DESCRIPTION_SYSTEM = (
    "–¢—ã —ç–∫—Å–ø–µ—Ä—Ç-–Ω—É—Ç—Ä–∏—Ü–∏–æ–ª–æ–≥. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–ø–∏—Å—ã–≤–∞–µ—Ç –µ–¥—É —Ç–µ–∫—Å—Ç–æ–º. "
    "–û—Ü–µ–Ω–∏ –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç—å –∏ –ë–ñ–£ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø–∏—Å–∞–Ω–∏—è. "
    "–ï—Å–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –æ–±—â–µ–µ, —Å–¥–µ–ª–∞–π —Ä–∞–∑—É–º–Ω—ã–µ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏—è –æ –ø–æ—Ä—Ü–∏–∏ (—Å—Ä–µ–¥–Ω—è—è –ø–æ—Ä—Ü–∏—è)."
)

MANUAL_WORKOUT_ANALYSIS_SYSTEM = (
    "–¢—ã –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–µ—Ä –∏ —ç–∫—Å–ø–µ—Ä—Ç –ø–æ —Ñ–∏—Ç–Ω–µ—Å—É. "
    "–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. "
    "–û—Ç–≤–µ—á–∞–π —Ç–æ–ª—å–∫–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ."
)

DAILY_MENU_SYSTEM = (
    "–¢—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –¥–∏–µ—Ç–æ–ª–æ–≥. –°–æ–∑–¥–∞—ë—à—å —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ —Ä–∞—Ü–∏–æ–Ω—ã –Ω–∞ –¥–µ–Ω—å. "
    "–û—Ç–≤–µ—á–∞–π —Ç–æ–ª—å–∫–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ."
)

SHOPPING_LIST_SYSTEM_PROMPT = (
    "–¢—ã –ø–æ–º–æ—â–Ω–∏–∫ –ø–æ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—é —Å–ø–∏—Å–∫–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤. –û—Ç–≤–µ—á–∞–π –≤—Å–µ–≥–¥–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ."
)

TRAINER_CHAT_WORKOUT_SYSTEM = (
    "–¢—ã –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–∏—Ç–Ω–µ—Å-—Ç—Ä–µ–Ω–µ—Ä. –ù–∞ –æ—Å–Ω–æ–≤–µ –¥–∏–∞–ª–æ–≥–∞ –ø–µ—Ä–µ–ø–∏—à–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É.\n\n"
    "–û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø:\n"
    "- exercises: 5‚Äì8 —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π\n"
    "- –£—á–∏—Ç—ã–≤–∞–π —É—Ä–æ–≤–µ–Ω—å, –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –∏—Å—Ç–æ—Ä–∏—é\n"
    "- –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–∞–∫—Ç–∏—á–Ω–æ–π –∏ –≤—ã–ø–æ–ª–Ω–∏–º–æ–π\n"
    "- weight_kg = 0 –¢–û–õ–¨–ö–û –¥–ª—è —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –≤–µ—Å–æ–º; –¥–ª—è —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π —Å –æ—Ç—è–≥–æ—â–µ–Ω–∏–µ–º ‚Äî —É–∫–∞–∑—ã–≤–∞–π —Ä–µ–∞–ª—å–Ω—ã–π –≤–µ—Å > 0"
)


# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Workout prompts (user content ‚Äî dynamic data)
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

def build_wellbeing_workout_structured_prompt(
    user: dict,
    wellbeing_reason: str,
    avoid_exercise_names: list[str] | None,
    split_info: str,
    superset_info: str,
    workout_history_info: str,
    exercises_info: str,
) -> str:
    avoid_block = ""
    if avoid_exercise_names:
        safe_list = [x.strip() for x in avoid_exercise_names if isinstance(x, str) and x.strip()]
        if safe_list:
            avoid_block = (
                "\n\n–ò–ó–ë–ï–ì–ê–ô –ü–û–í–¢–û–†–û–í (—ç—Ç–æ –±—ã–ª–æ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –≤–∞—Ä–∏–∞–Ω—Ç–µ —ç—Ç–æ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏):\n"
                f"{', '.join(safe_list[:18])}\n"
                "–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –Ω–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–º–µ—Ç–Ω–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è–º–∏ –∏/–∏–ª–∏ –∏—Ö –ø–æ—Ä—è–¥–∫–æ–º.\n"
            )
    return f"""–°–æ—Å—Ç–∞–≤—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É —Å —É—á—ë—Ç–æ–º —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–ö–û–ù–¢–ï–ö–°–¢ –°–ê–ú–û–ß–£–í–°–¢–í–ò–Ø:
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É –ø–æ –ø—Ä–∏—á–∏–Ω–µ: {wellbeing_reason}.
–°–æ—Å—Ç–∞–≤—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—É—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É (–ø–æ—Å–ª–∞–±–ª–µ–Ω–∏—è, –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã, —Å–Ω–∏–∂–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å).
{avoid_block}

–î–ê–ù–ù–´–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø:
–¶–µ–ª—å: {user.get('goal', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
–£—Ä–æ–≤–µ–Ω—å: {user.get('level', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (–∞–Ω–∫–µ—Ç–∞): {user.get('health_issues', '–Ω–µ—Ç')}
–ú–µ—Å—Ç–æ –∑–∞–Ω—è—Ç–∏–π: {user.get('location', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
–ß–∞—Å—Ç–æ—Ç–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫: {user.get('workouts_per_week', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')} —Ä–∞–∑/–Ω–µ–¥
–í—Ä–µ–º—è –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É: {user.get('workout_duration', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ: {user.get('equipment', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
–§–æ—Ä–º–∞—Ç—ã: {user.get('workout_formats', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
–†–æ—Å—Ç: {user.get('height', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')} —Å–º, –í–µ—Å: {user.get('weight', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')} –∫–≥, –í–æ–∑—Ä–∞—Å—Ç: {user.get('age', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}, –ü–æ–ª: {user.get('gender', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}

{split_info}
{superset_info}
{workout_history_info}
{exercises_info}

–ü–†–ê–í–ò–õ–ê:
- muscle_groups: 1‚Äì3 –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –≥—Ä—É–ø–ø—ã –º—ã—à—Ü (–≤—ã–±–∏—Ä–∞–π —Å–∞–º –∏—Å—Ö–æ–¥—è –∏–∑ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—è)
- exercises: 5‚Äì8 —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
- –ù–µ –≤–∫–ª—é—á–∞–π —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —É—Ö—É–¥—à–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- –ü—Ä–µ–¥–ª–∞–≥–∞–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã
- –£—á–∏—Ç—ã–≤–∞–π –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –ü–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–∑–±–µ–≥–∞–π –ø–æ–≤—Ç–æ—Ä–æ–≤ –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
- –í exercises ‚Äî –¢–û–õ–¨–ö–û —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è, –Ω–∏–∫–∞–∫–∏—Ö —Å–æ–≤–µ—Ç–æ–≤
- wellbeing_advice: –∫–æ—Ä–æ—Ç–∫–∏–π —Å–æ–≤–µ—Ç (1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è) –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—è
- –í—Å–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –£–ù–ò–ö–ê–õ–¨–ù–´–ú–ò
- weight_kg = 0 –¢–û–õ–¨–ö–û –¥–ª—è —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –≤–µ—Å–æ–º; –¥–ª—è —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π —Å –æ—Ç—è–≥–æ—â–µ–Ω–∏–µ–º ‚Äî —É–∫–∞–∑—ã–≤–∞–π —Ä–µ–∞–ª—å–Ω—ã–π –≤–µ—Å > 0"""


def build_manual_workout_infer_prompt(user: dict, exercises: list[dict[str, object]]) -> str:
    return f"""–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É –∏ –æ–ø—Ä–µ–¥–µ–ª–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ.

–î–ê–ù–ù–´–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø:
–ü–æ–ª: {user.get('gender', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
–¶–µ–ª—å: {user.get('goal', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
–£—Ä–æ–≤–µ–Ω—å: {user.get('level', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ: {user.get('equipment', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}

–í–´–ü–û–õ–ù–ï–ù–ù–´–ï –£–ü–†–ê–ñ–ù–ï–ù–ò–Ø:
{json.dumps(exercises, ensure_ascii=False)}

–ü–†–ê–í–ò–õ–ê:
- title: –∫–æ—Ä–æ—Ç–∫–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (–¥–æ 60 —Å–∏–º–≤–æ–ª–æ–≤)
- muscle_groups: 1‚Äì3 –≥—Ä—É–ø–ø—ã –º—ã—à—Ü –ø–æ —Å–º—ã—Å–ª—É —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
- calories_burned: –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
- –ù–µ –∏–∑–º–µ–Ω—è–π –∏ –Ω–µ –¥–æ–ø–æ–ª–Ω—è–π —Å–ø–∏—Å–æ–∫ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π"""


def build_workout_structured_prompt(
    user: dict,
    muscle_group: str,
    split_info: str,
    superset_info: str,
    workout_history_info: str,
    exercises_info: str,
) -> str:
    def _parse_selected_groups(value: str) -> list[str]:
        parts = [p.strip() for p in value.split(",")]
        return [p for p in parts if p]

    selected_groups = _parse_selected_groups(muscle_group)
    is_multi_group = len(selected_groups) > 1
    selected_groups_text = ", ".join(selected_groups) if selected_groups else muscle_group

    muscle_groups_constraints = (
        f"- muscle_groups: 2‚Äì4 –≥—Ä—É–ø–ø—ã –º—ã—à—Ü (–∏–∑ —Å–ø–∏—Å–∫–∞: {selected_groups_text}), –±–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö"
        if is_multi_group
        else f"- muscle_groups: 1‚Äì2 –≥—Ä—É–ø–ø—ã –º—ã—à—Ü, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–Ω—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏: {selected_groups_text}"
    )

    balance_rule = (
        f"- –°–±–∞–ª–∞–Ω—Å–∏—Ä—É–π —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –º–µ–∂–¥—É –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ –≥—Ä—É–ø–ø–∞–º–∏ –º—ã—à—Ü: {selected_groups_text}"
        if is_multi_group
        else ""
    )

    allowed_rule = f"- –ù–µ –¥–æ–±–∞–≤–ª—è–π —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –Ω–∞ –¥—Ä—É–≥–∏–µ –≥—Ä—É–ø–ø—ã –º—ã—à—Ü, –∫—Ä–æ–º–µ: {selected_groups_text}"

    return f"""–°–æ—Å—Ç–∞–≤—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É.

–î–ê–ù–ù–´–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø:
–¶–µ–ª—å: {user.get('goal', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
–£—Ä–æ–≤–µ–Ω—å: {user.get('level', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: {user.get('health_issues', '–Ω–µ—Ç')}
–ú–µ—Å—Ç–æ –∑–∞–Ω—è—Ç–∏–π: {user.get('location', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
–ß–∞—Å—Ç–æ—Ç–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫: {user.get('workouts_per_week', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')} —Ä–∞–∑/–Ω–µ–¥
–í—Ä–µ–º—è –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É: {user.get('workout_duration', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ: {user.get('equipment', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
–§–æ—Ä–º–∞—Ç—ã: {user.get('workout_formats', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
–†–æ—Å—Ç: {user.get('height', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')} —Å–º, –í–µ—Å: {user.get('weight', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')} –∫–≥, –í–æ–∑—Ä–∞—Å—Ç: {user.get('age', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}, –ü–æ–ª: {user.get('gender', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}

{split_info}
{superset_info}
{workout_history_info}
{exercises_info}

–û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø:
{muscle_groups_constraints}
- exercises: 5‚Äì8 —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
- calories_burned: —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ, –æ—Ü–µ–Ω–∫–∞ —Å–æ–∂–∂—ë–Ω–Ω—ã—Ö –∫–∞–ª–æ—Ä–∏–π

–ü–†–ê–í–ò–õ–ê:
{allowed_rule}
{balance_rule}
- –í—Å–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –£–ù–ò–ö–ê–õ–¨–ù–´–ú–ò ‚Äî –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–π –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ –¥–≤–∞–∂–¥—ã
- –£—á–∏—Ç—ã–≤–∞–π –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –ò–∑–±–µ–≥–∞–π –ø–æ–≤—Ç–æ—Ä–æ–≤ –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
- –í exercises ‚Äî –¢–û–õ–¨–ö–û —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è, –Ω–∏–∫–∞–∫–∏—Ö —Å–æ–≤–µ—Ç–æ–≤ –∏–ª–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

–ü–†–ê–í–ò–õ–ê –î–õ–Ø –í–ï–°–û–í (weight_kg):
- weight_kg = 0 –¢–û–õ–¨–ö–û –¥–ª—è —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –≤–µ—Å–æ–º (–æ—Ç–∂–∏–º–∞–Ω–∏—è, –ø–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è, –ø–ª–∞–Ω–∫–∞, —Å–∫—Ä—É—á–∏–≤–∞–Ω–∏—è)
- –î–ª—è –í–°–ï–• —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π —Å–æ —à—Ç–∞–Ω–≥–æ–π, –≥–∞–Ω—Ç–µ–ª—è–º–∏, —Ç—Ä–µ–Ω–∞–∂—ë—Ä–∞–º–∏ ‚Äî –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —É–∫–∞–∑—ã–≤–∞–π —Ä–µ–∞–ª—å–Ω—ã–π –≤–µ—Å > 0
- –ü–æ–¥–±–∏—Ä–∞–π –≤–µ—Å –∏—Å—Ö–æ–¥—è –∏–∑ —É—Ä–æ–≤–Ω—è, –ø–æ–ª–∞ –∏ –≤–æ–∑—Ä–∞—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–∏–º–µ—Ä–Ω—ã–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä—ã –¥–ª—è —Å—Ä–µ–¥–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è –º—É–∂—á–∏–Ω: –≥–∞–Ω—Ç–µ–ª–∏ 8-16 –∫–≥, —à—Ç–∞–Ω–≥–∞ 20-60 –∫–≥, —Ç—è–≥–∞/–∂–∏–º 30-80 –∫–≥
- –ü—Ä–∏–º–µ—Ä–Ω—ã–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä—ã –¥–ª—è —Å—Ä–µ–¥–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è –∂–µ–Ω—â–∏–Ω: –≥–∞–Ω—Ç–µ–ª–∏ 3-8 –∫–≥, —à—Ç–∞–Ω–≥–∞ 10-30 –∫–≥, —Ç—è–≥–∞/–∂–∏–º 15-40 –∫–≥
- –î–ª—è –Ω–æ–≤–∏—á–∫–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π –º–µ–Ω—å—à–∏–π –≤–µ—Å, –¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö ‚Äî –±–æ–ª—å—à–∏–π"""


def build_workout_single_exercise_prompt(
    user: dict,
    muscle_group: str,
    superset_info: str,
    workout_history_info: str,
    existing_exercise_names: list[str],
) -> str:
    existing = ", ".join(existing_exercise_names[:12])
    return f"""–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –û–î–ù–û —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ.

–î–ê–ù–ù–´–ï –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø:
–¶–µ–ª—å: {user.get('goal', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
–£—Ä–æ–≤–µ–Ω—å: {user.get('level', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: {user.get('health_issues', '–Ω–µ—Ç')}
–ú–µ—Å—Ç–æ –∑–∞–Ω—è—Ç–∏–π: {user.get('location', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
–í—Ä–µ–º—è –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É: {user.get('workout_duration', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ: {user.get('equipment', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}
–§–æ—Ä–º–∞—Ç—ã: {user.get('workout_formats', '–Ω–µ —É–∫–∞–∑–∞–Ω–æ')}

–°–µ–≥–æ–¥–Ω—è —Ç—Ä–µ–Ω–∏—Ä—É–µ–º: {muscle_group}.
{superset_info}
{workout_history_info}

–ó–ê–ü–†–ï–©–Å–ù–ù–´–ï –£–ü–†–ê–ñ–ù–ï–ù–ò–Ø (–ù–ò–ö–û–ì–î–ê –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–π –Ω–∏ –æ–¥–Ω–æ –∏–∑ –Ω–∏—Ö, –¥–∞–∂–µ —Å –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º): {existing}

–ü–†–ê–í–ò–õ–ê:
- –¢–û–õ–¨–ö–û –Ω–∞ –≥—Ä—É–ø–ø—ã –º—ã—à—Ü: {muscle_group}
- –£—á–∏—Ç—ã–≤–∞–π –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- weight_kg = 0 –¢–û–õ–¨–ö–û –¥–ª—è —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –≤–µ—Å–æ–º; –¥–ª—è —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π —Å –æ—Ç—è–≥–æ—â–µ–Ω–∏–µ–º ‚Äî —É–∫–∞–∑—ã–≤–∞–π —Ä–µ–∞–ª—å–Ω—ã–π –≤–µ—Å > 0, –ø–æ–¥—Ö–æ–¥—è—â–∏–π —É—Ä–æ–≤–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""


# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
# Nutrition prompts
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

def build_daily_menu_structured_prompt(user: dict, nutrition_plan: dict, day_name: str = "") -> str:
    user_info = f"""–§–∏–∑–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ:
- –ü–æ–ª: {user.get('gender', '–Ω–µ —É–∫–∞–∑–∞–Ω')}
- –í–æ–∑—Ä–∞—Å—Ç: {user.get('age', '–Ω–µ —É–∫–∞–∑–∞–Ω')}
- –†–æ—Å—Ç: {user.get('height', '–Ω–µ —É–∫–∞–∑–∞–Ω')} —Å–º
- –í–µ—Å: {user.get('weight', '–Ω–µ —É–∫–∞–∑–∞–Ω')} –∫–≥
- –¶–µ–ª—å —Ñ–∏—Ç–Ω–µ—Å–∞: {user.get('goal', '–Ω–µ —É–∫–∞–∑–∞–Ω–∞')}
- –£—Ä–æ–≤–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏: {user.get('level', '–Ω–µ —É–∫–∞–∑–∞–Ω')}
- –ß–∞—Å—Ç–æ—Ç–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫: {user.get('workouts_per_week', '–Ω–µ —É–∫–∞–∑–∞–Ω–∞')} —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–ª–∞–Ω–∞ –ø–∏—Ç–∞–Ω–∏—è:
- –¶–µ–ª—å –ø–∏—Ç–∞–Ω–∏—è: {nutrition_plan.get('nutrition_goal', '')}
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: {nutrition_plan.get('dietary_restrictions', '')}
- –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è: {nutrition_plan.get('meal_preferences', '')}
- –í—Ä–µ–º—è –Ω–∞ –≥–æ—Ç–æ–≤–∫—É: {nutrition_plan.get('cooking_time', '')}
- –ë—é–¥–∂–µ—Ç: {nutrition_plan.get('budget', '')}"""

    target_calories = nutrition_plan.get("target_calories", 2000)
    target_proteins = nutrition_plan.get("target_proteins", 100)
    target_fats = nutrition_plan.get("target_fats", 70)
    target_carbs = nutrition_plan.get("target_carbs", 250)

    day_context = f"–≠—Ç–æ —Ä–∞—Ü–∏–æ–Ω –Ω–∞ {day_name}. " if day_name else ""

    return f"""–°–æ–∑–¥–∞–π —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π —Ä–∞—Ü–∏–æ–Ω –Ω–∞ –¥–µ–Ω—å. {day_context}

{user_info}

–¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ –¥–µ–Ω—å:
- –ö–∞–ª–æ—Ä–∏–∏: {target_calories} –∫–∫–∞–ª
- –ë–µ–ª–∫–∏: {target_proteins} –≥
- –ñ–∏—Ä—ã: {target_fats} –≥
- –£–≥–ª–µ–≤–æ–¥—ã: {target_carbs} –≥

–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û ‚Äî –¢–û–ß–ù–û–ï –°–û–û–¢–í–ï–¢–°–¢–í–ò–ï –ö–ë–ñ–£:
1. –°—É–º–º–∞ –∫–∞–ª–æ—Ä–∏–π –≤—Å–µ—Ö –±–ª—é–¥ = {target_calories} –∫–∫–∞–ª (¬±50)
2. –°—É–º–º–∞ –±–µ–ª–∫–æ–≤ = {target_proteins} –≥ (¬±5)
3. –°—É–º–º–∞ –∂–∏—Ä–æ–≤ = {target_fats} –≥ (¬±5)
4. –°—É–º–º–∞ —É–≥–ª–µ–≤–æ–¥–æ–≤ = {target_carbs} –≥ (¬±10)

–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø:
- –°–æ–∑–¥–∞–π –£–ù–ò–ö–ê–õ–¨–ù–´–ï –±–ª—é–¥–∞
- –£—á–∏—Ç—ã–≤–∞–π –≤—Å–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è
- –ü–æ–¥–±–µ—Ä–∏ –±–ª—é–¥–∞ –ø–æ–¥ –±—é–¥–∂–µ—Ç –∏ –≤—Ä–µ–º—è –≥–æ—Ç–æ–≤–∫–∏
- –í –∫–∞–∂–¥–æ–π —Å–µ–∫—Ü–∏–∏ 1-3 –±–ª—é–¥–∞
- –ù–∞–∑–≤–∞–Ω–∏—è –±–ª—é–¥ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- –ü–µ—Ä–µ–¥ –æ—Ç–≤–µ—Ç–æ–º —É–±–µ–¥–∏—Å—å —á—Ç–æ —Å—É–º–º—ã —Å—Ö–æ–¥—è—Ç—Å—è!"""


def build_shopping_list_prompt(daily_menu: str) -> str:
    return f"""–ù–∞ –æ—Å–Ω–æ–≤–µ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä–∞—Ü–∏–æ–Ω–∞ —Å–æ–∑–¥–∞–π —É–¥–æ–±–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¥–ª—è –ø–æ–∫—É–ø–∫–∏:

{daily_menu}

–°–æ–∑–¥–∞–π —Å–ø–∏—Å–æ–∫ –≤ —Ñ–æ—Ä–º–∞—Ç–µ:

üõí **–°–ü–ò–°–û–ö –ü–†–û–î–£–ö–¢–û–í:**

**–ú–Ø–°–û –ò –†–´–ë–ê:**
‚Ä¢ [–ü—Ä–æ–¥—É–∫—Ç] - [–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ]

**–ú–û–õ–û–ß–ù–´–ï –ü–†–û–î–£–ö–¢–´:**
‚Ä¢ [–ü—Ä–æ–¥—É–∫—Ç] - [–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ]

**–û–í–û–©–ò –ò –§–†–£–ö–¢–´:**
‚Ä¢ [–ü—Ä–æ–¥—É–∫—Ç] - [–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ]

**–ö–†–£–ü–´ –ò –ú–ê–ö–ê–†–û–ù–´:**
‚Ä¢ [–ü—Ä–æ–¥—É–∫—Ç] - [–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ]

**–î–†–£–ì–û–ï:**
‚Ä¢ [–ü—Ä–æ–¥—É–∫—Ç] - [–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ]

üí∞ **–ü–†–ò–ú–ï–†–ù–ê–Ø –°–¢–û–ò–ú–û–°–¢–¨:** [—Å—É–º–º–∞] ‚ÇΩ

–¢–†–ï–ë–û–í–ê–ù–ò–Ø:
1. –£–∫–∞–∑—ã–≤–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (–≥—Ä–∞–º–º—ã, —à—Ç—É–∫–∏, –ø–∞—á–∫–∏)
2. –ì—Ä—É–ø–ø–∏—Ä—É–π –ø—Ä–æ–¥—É–∫—Ç—ã –ø–æ –æ—Ç–¥–µ–ª–∞–º –º–∞–≥–∞–∑–∏–Ω–∞
3. –£—á–∏—Ç—ã–≤–∞–π —á—Ç–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ–º–∞
4. –î–æ–±–∞–≤—å –ø—Ä–∏–º–µ—Ä–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–∫—É–ø–∫–∏
5. –¢–æ–ª—å–∫–æ –ø—Ä–æ–¥—É–∫—Ç—ã –∏–∑ —Ä–∞—Ü–∏–æ–Ω–∞ –≤—ã—à–µ"""
