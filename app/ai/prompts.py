MUSCLE_GROUPS_COMBINED = [
    "грудь и руки",
    "спина и плечи",
    "пресс и корпус"
]

MUSCLE_GROUPS_SINGLE = [
    "грудь",
    "спина",
    "ноги",
    "плечи",
    "руки",
    "пресс"
]

WORKOUT_SPLITS = {
    1: ["общий комплекс"],
    2: ["верх", "низ"],
    3: ["грудь", "спина", "ноги"],
    4: ["грудь", "спина", "ноги", "плечи"],
    5: ["грудь", "спина", "ноги", "плечи", "руки"]
}

SPLIT_DESCRIPTIONS = {
    1: "Общий комплекс (1 тренировка в неделю)",
    2: "Верх/Низ (2 тренировки в неделю)",
    3: "Грудь/Спина/Ноги (3 тренировки в неделю)",
    4: "Грудь/Спина/Ноги/Плечи (4 тренировки в неделю)",
    5: "Грудь/Спина/Ноги/Плечи/Руки (5+ тренировок в неделю)"
}

TIP_TYPES = [
    "фитнес и технике выполнения упражнений",
    "правильном питании и гидратации",
    "восстановлении и сне",
    "мотивации и достижении целей",
    "профилактике травм и разминке"
]


def build_workout_prompt(
    user: dict,
    muscle_group: str,
    exercise_count: int,
    tip_type: str,
    split_info: str,
    superset_info: str,
    workout_history_info: str,
    exercises_info: str
) -> str:
    return f"""Ты - профессиональный фитнесс-тренер. Сегодня у пользователя день тренировки: {muscle_group}. 
Составь тренировку только для этой группы мышц, не добавляй упражнения на другие группы. 
Учитывай цель, уровень, ограничения, частоту тренировок, время на тренировку, доступное оборудование, предпочитаемые форматы, физические параметры и место занятий.

Цель: {user.get('goal', 'не указано')}. 
Уровень: {user.get('level', 'не указано')}. 
Ограничения: {user.get('health_issues', 'нет')}. 
Место занятий: {user.get('location', 'не указано')}. 
Частота тренировок (из анкеты): {user.get('workouts_per_week', 'не указано')} раз в неделю. 
Время на тренировку: {user.get('workout_duration', 'не указано')}. 
Доступное оборудование: {user.get('equipment', 'не указано')}. 
Предпочитаемые форматы тренировок: {user.get('workout_formats', 'не указано')}. 
Рост: {user.get('height', 'не указано')} см. Вес: {user.get('weight', 'не указано')} кг. Возраст: {user.get('age', 'не указано')}. Пол: {user.get('gender', 'не указано')}. 

{split_info}
{superset_info}
{workout_history_info}
{exercises_info}

ВАЖНЫЕ ОГРАНИЧЕНИЯ:
• Используй только указанное оборудование: {user.get('equipment', 'собственный вес')}
• Придерживайся указанного формата тренировки: {user.get('workout_formats', 'классическая силовая')}
• Уложись в указанное время: {user.get('workout_duration', '30-45 минут')}
• По возможности избегай повторов упражнений из списка выше, но если базовое упражнение необходимо для прогрессии, можешь использовать его с вариацией

Сгенерируй ровно {exercise_count} упражнений (последнее — кардио или заминка). Сделай тренировку максимально разнообразной внутри выбранной группы мышц.
Для каждого упражнения обязательно указывай вес (даже если это собственный вес — пиши явно).

Форматируй ответ строго так:
Совет дня: [Персонализированный совет о {tip_type}, основанный на цель ({user.get('goal', 'не указано')}), уровень подготовки ({user.get('level', 'не указано')}) и особенности пользователя. Совет должен быть практичным и применимым]

План тренировки на сегодня: {muscle_group}

Для каждого упражнения используй такой формат:
[Номер]. [Название упражнения]
[кол-во подходов × повторений — вес]
*Комментарий по технике или совет*

Последнее упражнение всегда кардио или заминка, указывай его в том же формате.

Не добавляй лишних пояснений вне структуры плана."""


FOOD_ANALYSIS_PROMPT = """Определи, что изображено на фото, и оцени калорийность блюда. 
Верни JSON вида: {"description": "...", "calories": ..., "proteins": ..., "fats": ..., "carbs": ...}. 
Обязательно укажи БЖУ (белки, жиры, углеводы) в граммах. 
Отвечай всегда только на русском языке."""


FOOD_CLARIFICATION_PROMPT = """Пользователь прислал фото еды. Вот его уточнение: '{clarification}'. 
Определи, что изображено на фото, и оцени калорийность блюда с учётом уточнения. 
Верни JSON вида: {{"description": "...", "calories": ..., "proteins": ..., "fats": ..., "carbs": ...}}. 
Обязательно укажи БЖУ (белки, жиры, углеводы) в граммах. 
Отвечай всегда только на русском языке."""

